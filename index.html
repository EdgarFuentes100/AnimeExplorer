<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Animes Populares y Recomendados</title>
</head>

<body>
    <!-- Header Section -->
    <header>
        <h1>Buscador de Animes</h1>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar Anime...">
        </div>
    </header>

    <!-- Main Content -->
    <div>
        <div id="searchResults" class="search-results">
            <!-- Aquí se mostrarán los resultados de la búsqueda -->
        </div>
        <!-- Sección de Animes Más Vistos -->
        <div class="anime-section" id="topAnimeSection">
            <h2>Animes Más Vistos</h2>
            <div class="filter-container">
                <select id="topGenreFilter"></select>
            </div>
            <div id="topAnimeList" class="anime-list"></div>
            <div id="topLoading" class="loading">Cargando...</div>
            <div id="topPagination" class="pagination"></div>
        </div>

        <!-- Sección de Animes Recomendados en Emisión -->
        <div class="anime-section" id="recommAnimeSection">
            <h2>Recomendados en Emisión</h2>
            <div class="filter-container">
                <select id="recommGenreFilter"></select>
            </div>
            <div id="recommAnimeList" class="anime-list"></div>
            <div id="recommLoading" class="loading">Cargando...</div>
            <div id="recommPagination" class="pagination"></div>
        </div>

        <!-- Sección de Recomendados por Año -->
        <div class="anime-section" id="tempoAnimeSection">
            <h2>Recomendados en Emisión por años</h2>

            <div class="filter-container">
                <!-- Filtro por Año -->
                <select id="tempoYearFilter"></select>

                <!-- Filtro por Temporada -->
                <select id="tempoSeasonFilter">
                    <option value="">Seleccionar Temporada</option>
                    <option value="winter">Invierno</option>
                    <option value="spring">Primavera</option>
                    <option value="summer">Verano</option>
                    <option value="fall">Otoño</option>
                </select>
            </div>
            <div id="tempoAnimeList" class="anime-list"></div>
            <div id="tempoLoading" class="loading">Cargando...</div>
            <div id="tempoPagination" class="pagination"></div>
        </div>
    </div>

    <!-- Modal de Detalles del Anime -->
    <div id="animeModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>

            <div class="modal-header">
                <img id="animeImageModal" src="" alt="Anime Image">
                <div class="modal-extra-info">
                    <h2 id="animeTitleModal"></h2>
                    <p><strong>Género:</strong> <span id="animeGenre"></span></p>
                    <p><strong>Temporadas:</strong> <span id="animeSeasons"></span></p>
                    <p><strong>Episodios:</strong> <span id="animeEpisodes"></span></p>
                    <p><strong>Puntuación:</strong> <span id="animeRating"></span></p>
                </div>
            </div>
            <div class="modal-info">
                <p><strong>Sinopsis:</strong></p>
                <p id="animeSynopsis"></p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Generar años dinámicamente desde 2020 hasta el año actual
        document.addEventListener("DOMContentLoaded", () => {
            const yearSelect = document.getElementById("tempoYearFilter");
            const seasonSelect = document.getElementById("tempoSeasonFilter");
            const currentYear = new Date().getFullYear();
            const currentMonth = new Date().getMonth(); // 0 = Enero, 11 = Diciembre
            const startYear = 2020;

            // Llenar años dinámicamente
            const defaultOption = document.createElement("option");
            defaultOption.value = "";
            defaultOption.textContent = "Seleccionar Año";
            yearSelect.appendChild(defaultOption);

            for (let year = currentYear; year >= startYear; year--) {
                const option = document.createElement("option");
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }

            // Detectar temporada actual
            const getSeason = (month) => {
                if ([11, 0, 1].includes(month)) return "winter";   // Dic, Ene, Feb
                if ([2, 3, 4].includes(month)) return "spring";   // Mar, Abr, May
                if ([5, 6, 7].includes(month)) return "summer";   // Jun, Jul, Ago
                return "fall";                                   // Sep, Oct, Nov
            };

            // Seleccionar año y temporada actuales
            yearSelect.value = currentYear;
            seasonSelect.value = getSeason(currentMonth);
        });

    </script>

    <script src="js/main.js"></script>
    <script src="js/getGeneros.js"></script>
    <script src="js/getRecommAnime.js"></script>
    <script src="js/getTopAnime.js"></script>
    <script src="js/displayAnime.js"></script>
    <script src="js/searchAnime.js"></script>
    <script src="js/getTempoAnime.js"></script>
</body>

</html>